<!DOCTYPE html>
<html>
<head>
  <title>Top Causes by State</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <style>
    #map { height: 95vh; }
    .tooltip { background: white; padding: 5px; border-radius: 5px; }
  </style>
</head>
<body>

<div id="map"></div>

<script>
  // Initialize the map
  var map = L.map('map').setView([37.8, -96], 4);  // Centered on the United States

  // Add a base layer to the map
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 10,
    attribution: 'Â© OpenStreetMap contributors'
  }).addTo(map);

  // Define the top causes by state
  const topCauses = {
    "Alabama": "Making housing more accessible and affordable.",
    "Alaska": "Ensuring safe learning environments.",
    "Arizona": "Tackling the cost of education and student loans.",
    "Arkansas": "Advancing equality and rights for LGBTQIA+ communities.",
    "California": "Promoting mental health support and education.",
    "Colorado": "Promoting mental health support and education.",
    "Connecticut": "Advancing equality and rights for LGBTQIA+ communities.",
    "Delaware": "Improving access to health services.",
    "District of Columbia": "Tackling the cost of education and student loans.",
    "Florida": "Promoting mental health support and education.",
    "Georgia": "Working towards racial equality and ending discrimination.",
    "Hawaii": "Reducing waste and pollution in our environment.",
    "Idaho": "Ensuring safe learning environments.",
    "Illinois": "Ensuring safe learning environments.",
    "Indiana": "Ensuring safe learning environments.",
    "Iowa": "Tackling the cost of education and student loans.",
    "Kansas": "Reducing waste and pollution in our environment.",
    "Kentucky": "Promoting mental health support and education.",
    "Louisiana": "Tackling the cost of education and student loans.",
    "Maine": "Tackling the cost of education and student loans.",
    "Maryland": "Promoting mental health support and education.",
    "Massachusetts": "Promoting mental health support and education.",
    "Michigan": "Promoting mental health support and education.",
    "Minnesota": "Improving access to health services.",
    "Mississippi": "Ensuring safe learning environments.",
    "Missouri": "Improving access to health services.",
    "Montana": "Ensuring safe learning environments.",
    "Nebraska": "Making housing more accessible and affordable.",
    "Nevada": "Tackling the cost of education and student loans.",
    "New Hampshire": "Tackling the cost of education and student loans.",
    "New Jersey": "Improving access to health services.",
    "New Mexico": "Ensuring healthy relationships with technology.",
    "New York": "Promoting mental health support and education.",
    "North Carolina": "Promoting mental health support and education.",
    "North Dakota": "Tackling the cost of education and student loans.",
    "Ohio": "Promoting mental health support and education.",
    "Oklahoma": "Improving access to health services.",
    "Oregon": "Tackling the cost of education and student loans.",
    "Pennsylvania": "Promoting mental health support and education.",
    "Puerto Rico": "Improving access to health services.",
    "Rhode Island": "Ensuring safe learning environments.",
    "South Carolina": "Promoting mental health support and education.",
    "South Dakota": "Tackling the cost of education and student loans.",
    "Tennessee": "Making housing more accessible and affordable.",
    "Texas": "Promoting mental health support and education.",
    "Utah": "Promoting mental health support and education.",
    "Virginia": "Reducing waste and pollution in our environment.",
    "Washington": "Tackling the cost of education and student loans.",
    "West Virginia": "Tackling the cost of education and student loans.",
    "Wisconsin": "Promoting mental health support and education.",
    "Wyoming": "Tackling the cost of education and student loans."
}


// Define colors for each cause category
const causeColors = {
  "Making housing more accessible and affordable.": "#FFEDA0",
  "Ensuring safe learning environments.": "#FED976",
  "Tackling the cost of education and student loans.": "#FEB24C",
  "Advancing equality and rights for LGBTQIA+ communities.": "#FD8D3C",
  "Promoting mental health support and education.": "#FC4E2A",
  "Improving access to health services.": "#E31A1C",
  "Working towards racial equality and ending discrimination.": "#BD0026",
  "Reducing waste and pollution in our environment.": "#800026",
  "Ensuring healthy relationships with technology.": "#006837"
};

// Function to get color based on the cause for each state
function getColor(cause) {
  return causeColors[cause] || "#99d8c9";  // Default color if cause is not defined
}

// Function to style each state based on its top cause
function style(feature) {
  return {
    fillColor: getColor(topCauses[feature.properties.name]),
    weight: 2,
    opacity: 1,
    color: 'white',
    dashArray: '3',
    fillOpacity: 0.7
  };
}

  // Define hover interaction for each state
  function highlightFeature(e) {
    var layer = e.target;
    layer.setStyle({
      weight: 5,
      color: '#666',
      dashArray: '',
      fillOpacity: 0.7
    });
    layer.bindTooltip("<div class='tooltip'><b>" + layer.feature.properties.name + "</b><br>" + 
                      topCauses[layer.feature.properties.name] + "</div>").openTooltip();
  }

  // Reset state style on mouseout
  function resetHighlight(e) {
    geojson.resetStyle(e.target);
    e.target.closeTooltip();
  }

  // Set up interactions for each state
  function onEachFeature(feature, layer) {
    layer.on({
      mouseover: highlightFeature,
      mouseout: resetHighlight
    });
  }

  // Load GeoJSON for US states (ensure this path points to your GeoJSON file for US states)
  var geojson;
  fetch('usStates.json')  // Replace with your actual GeoJSON path
    .then(response => response.json())
    .then(data => {
      geojson = L.geoJson(data, {
        style: style,
        onEachFeature: onEachFeature
      }).addTo(map);
    });
</script>

</body>
</html>
